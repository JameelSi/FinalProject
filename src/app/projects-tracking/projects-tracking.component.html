<!-------------------- TOOLBAR ------------------------------------------------------>
<!-- <mat-toolbar class="mat-elevation-z8">
    <span>Responsive side navigation</span>
    <span class="spacer"></span>
    <button mat-icon-button *ngIf="sidenav.mode === 'over'" (click)="sidenav.toggle()">
        <mat-icon *ngIf="!sidenav.opened">
            menu
        </mat-icon>
        <mat-icon *ngIf="sidenav.opened">
            close
        </mat-icon>
    </button>
</mat-toolbar> -->

<div class="menu-header" *ngIf="sidenav.mode == 'over'">
    <span class="spacer"></span>
    <h4 class="title">רכזי אזור</h4>
    <button mat-icon-button (click)="sidenav.toggle()">
        <mat-icon *ngIf="!sidenav.opened">
            menu
        </mat-icon>
        <mat-icon *ngIf="sidenav.opened">
            close
        </mat-icon>
    </button>
</div>

<!-------------------- SIDENAV DRAWER ------------------------------------------------------>
<mat-drawer-container>
    <mat-drawer #sidenav mode="side" position="end">
        <h4 class="title" *ngIf="sidenav.mode == 'side'">רכזי אזור</h4>
        <mat-divider *ngIf="sidenav.mode == 'side'"></mat-divider>
        <mat-accordion>
            <mat-expansion-panel class="menu-button" hideToggle (opened)="getAreaCoordsData('all')" expanded>
                <mat-expansion-panel-header>
                    <mat-panel-title class="exp-title">
                        <span>כל השכונות</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
            </mat-expansion-panel>

            <mat-expansion-panel class="menu-button" hideToggle (click)="getAreaCoordsData(areaCoord)"
                *ngFor='let areaCoord of areaCoords'>
                <mat-expansion-panel-header>
                    <mat-panel-title class="exp-title">
                        <span>{{areaCoord.name}}</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent class="details">
                    {{areaCoord.phone}}:פלאפון
                    {{areaCoord.email}}:מייל
                </ng-template>
            </mat-expansion-panel>
        </mat-accordion>

    </mat-drawer>

    <!-------------------- MAIN CONTENT ------------------------------------------------------>
    <mat-drawer-content>
        <!-------------------- NEIGHB MENU ------------------------------------------------------>
        <div dir="rtl" class="menu-container">
            <button class="neighbs-menu-btn" mat-raised-button color="primary" [matMenuTriggerFor]="menu"
                menuData="currNeighborhoods">
                <mat-icon class=''>expand_more</mat-icon> <!--unfold_more/expand_more/menu-->
                שכונות
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item *ngFor='let neighb of currNeighborhoods' (click)="setProjects(neighb.id)">
                    {{neighb.id}}</button>
            </mat-menu>
            <section class="neighb-name">{{currNeighborhood?.id}}</section>
        </div>

        <!-------------------- NEIGHB MANAGER ------------------------------------------------------>
        <mat-card class="mngr-details-container" *ngIf="currNeighborhood?.managerInfo">
            <mat-card-content class="mngr-details">
                <section><strong>
                        {{currNeighborhood?.managerInfo?.name}} :שם
                    </strong></section>
                <section><strong>
                        {{currNeighborhood?.managerInfo?.email}} :מייל
                    </strong></section>
                <section><strong>
                        {{currNeighborhood?.managerInfo?.phone}} :פלאפון
                    </strong></section>
            </mat-card-content>
        </mat-card>

        <mat-form-field>
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. מועדון וותיקים" #input>
        </mat-form-field>

        <button class="add-row" mat-button
            (click)="openDialog('Add', currNeighborhood, undefined, currNeighborhood?.id?.trim(), 'project' )"
            mat-flat-button color="primary">
            הוסף שורה</button>
        <!-------------------- TABLE ------------------------------------------------------>
        <mat-table dir="rtl" [dataSource]="projectsToDisplay" matSort>

            <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
                <mat-cell *matCellDef="let project">{{project.date.toDate() | date: 'dd MMM YY hh:mm'}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="clubCoordinatorId">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Club</mat-header-cell>
                <mat-cell class="description-cell" *matCellDef="let project">
                    {{project.clubInfo?.club}}
                </mat-cell>

            </ng-container>

            <ng-container matColumnDef="projectType">
                <mat-header-cell *matHeaderCellDef>Project Type</mat-header-cell>
                <mat-cell class="duration-cell" *matCellDef="let project">{{project.projectType}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="comments">
                <mat-header-cell *matHeaderCellDef>Comments</mat-header-cell>
                <mat-cell class="duration-cell" *matCellDef="let project">{{project.comments}}
                </mat-cell>
            </ng-container>

            <!-- Action Column -->
            <ng-container matColumnDef="action">
                <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
                <mat-cell *matCellDef="let element" class="action-link">
                    <div>
                        <button class="tableBtn" mat-stroked-button color="primary"
                            (click)="openDialog('Update', element, undefined, currNeighborhood?.id?.trim(), 'project')">Edit</button>
                        <button class="tableBtn" mat-stroked-button color="primary"
                            (click)="openDialog('Delete', element, undefined, currNeighborhood?.id?.trim(), 'project')">Delete</button>
                    </div>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

            <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

        </mat-table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>

    </mat-drawer-content>
</mat-drawer-container>

<!-------------------- SPINNER ------------------------------------------------------>
<mat-spinner *ngIf="spin"></mat-spinner>


<!-- <mat-tab-group mat-align-tabs="end" [selectedIndex]=0 (selectedTabChange)="setProjects($event)"> -->
<!--[selectedIndex]="defaultSelectedTab"-->
<!-- <ng-container *ngFor='let neighb of currNeighborhoods'> -->
<!-- <mat-tab label="{{neighb.id}}"> -->
<!-- <ng-template matTabContent> -->

<!-- </ng-template> -->
<!-- </mat-tab> -->
<!-- </ng-container> -->
<!-- </mat-tab-group> -->